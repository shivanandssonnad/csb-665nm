(this["webpackJsonpimpact-analytics-challenge"]=this["webpackJsonpimpact-analytics-challenge"]||[]).push([[0],{23:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(11),i=a.n(r),l=(a(23),a(1));var o=function(e){return Object(l.jsx)("h3",{...e,children:e.children})},c=a(12),d=a(13);var h=function(e){const{value:t}=e,{lat:a,lng:n}=t||{};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:["Latitude: ",a]}),Object(l.jsxs)("div",{children:["Longitude: ",n]})]})};var p=function(e){return Object(l.jsx)("div",{className:"display-center",children:Object(l.jsx)("img",{src:e.value,alt:"profile"})})};var m,u=function(e){return e.value};const b=a(14).a.div(m||(m=Object(c.a)(['\n  /* This is required to make the table full-width */\n  display: block;\n  max-width: 100%;\n\n  /* This will make the table scrollable when it gets too small */\n  .tableWrap {\n    display: block;\n    max-width: 100%;\n    overflow-x: scroll;\n    overflow-y: hidden;\n    border: 1px solid black;\n  }\n\n  table {\n    /* Make sure the inner table is always as wide as needed */\n    width: 100%;\n    border-spacing: 0;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      /* The secret sauce */\n      /* Each cell should grow equally */\n      width: 1%;\n      /* But "collapsed" cells should be as small as possible */\n      &.collapse {\n        width: 0.0000000001%;\n      }\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n\n  .pagination {\n    padding: 0.5rem;\n  }\n'])));function g(e){const{columns:t,data:a,className:n}=e,{getTableProps:s,getTableBodyProps:r,headerGroups:i,rows:o,prepareRow:c}=Object(d.useTable)({columns:t,data:a});return Object(l.jsx)(b,{className:n,children:Object(l.jsx)("div",{className:"tableWrap",children:Object(l.jsxs)("table",{...s(),children:[Object(l.jsx)("thead",{children:i.map((e=>Object(l.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(l.jsx)("th",{...e.getHeaderProps(),style:{background:"aliceblue",color:"black",fontWeight:"bold"},children:e.render("Header")})))})))}),Object(l.jsx)("tbody",{...r(),children:o.map((e=>(c(e),Object(l.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>Object(l.jsx)("td",{...e.getCellProps(),style:{padding:"10px"},children:e.render("Cell")})))}))))})]})})})}g.defaultProps={columns:[],data:[]},g.NameRenderer=u,g.ImageRenderer=p,g.CoordinateRenderer=h;var j=g;const k=[{Header:"Name",accessor:"name",Cell:j.NameRenderer},{Header:"Large Image",accessor:"largeImage",Cell:j.ImageRenderer},{Header:"Medium Image",accessor:"mediumImage",Cell:j.ImageRenderer},{Header:"Thumbnail Image",accessor:"thumbnailImage",Cell:j.ImageRenderer},{Header:"Coordinates",accessor:"coordinates",Cell:j.CoordinateRenderer}];var C=a(2),v=a.n(C),x=a(18),O=a.n(x);function f(e){const{maps:t,map:a,position:s,onClick:r,details:i}=e||{},o=Object(n.useCallback)((()=>new t.Marker({position:s,map:a})),[t,s,a]);function c(e){e.setMap(null)}const d=Object(n.useCallback)((()=>{r(i)}),[i,r]);return Object(n.useEffect)((()=>{const e=o();return t.event.addListener(e,"click",d),c.bind(null,e)}),[o,t,d]),Object(l.jsx)("div",{})}f.defaultProps={onClick:()=>{},details:{}};class M extends s.a.Component{constructor(e){super(e),this.handleClickOnMap=e=>{const{allowClickOnMap:t}=this.props;t&&e.addListener("click",(e=>{const{latLng:t}=e||{},a={lat:t.lat(),lng:t.lng()};this.props.onClickMap(a)}))},this.handleCreateMap=()=>O()("AIzaSyANDj4mJ2i_d0zRiNozVqbUGMgZTnDOeYI")(),this.initMap=()=>{const{center:e,defaultZoom:t}=this.state;this.handleCreateMap().then((a=>{const n=this.mapElement,s=new a.Map(n,{center:e,zoom:t,streetViewControl:!1});return{maps:a,map:s}})).then((e=>{const{maps:t,map:a}=e||{};this.setState({maps:t,map:a}),this.handleClickOnMap(a),this.props.onUpdateParent({maps:t,map:a})}))},this.handleRef=e=>{this.mapElement=e},this.state={center:e.center,defaultZoom:10}}componentDidMount(){this.initMap()}render(){const{width:e,height:t}=this.props;return Object(l.jsx)("div",{ref:this.handleRef,id:"map",style:{width:e,height:t},children:this.props.children})}}M.defaultProps={onUpdateParent:()=>{},onClickMap:()=>{},allowClickOnMap:!1,width:"100%",height:"300px",center:{lat:51.50853,lng:-.12574}},M.propTyeps={onUpdateParent:v.a.func,width:v.a.string,height:v.a.string,center:v.a.object,allowClickOnMap:v.a.bool,onClickMap:v.a.func},M.Marker=f;var w=M;class P extends s.a.Component{constructor(e){super(e),this.getPointers=()=>this.props.markers,this.handleSaveMapConfig=e=>{const{map:t,maps:a}=e||{};this.setState({map:t,maps:a,initialised:!0},this.handleZoomToAllPointers)},this.handleZoomToAllPointers=()=>{const{maps:e,map:t}=this.state,a=this.getPointers();if(1===a.length)t.setCenter(a[0]),t.setZoom(a[0].zoom);else{var n=new e.LatLngBounds;a.forEach((e=>n.extend(e))),t.fitBounds(n)}},this.handleClickMarker=e=>{this.props.onClickMarker(e)},this.renderMarkers=()=>{const{initialised:e,maps:t,map:a}=this.state,n=this.getPointers();return e?n.map((e=>Object(l.jsx)(w.Marker,{maps:t,map:a,position:e,onClick:this.handleClickMarker,details:e},"".concat(e.lat,"_").concat(e.lng)))):null},this.state={initialised:!1}}render(){const{center:e}=this.props;return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(w,{center:e,onUpdateParent:this.handleSaveMapConfig,allowClickOnMap:!1,onClickMap:this.handleClickMap,children:this.renderMarkers()})})}}P.defaultProps={markers:[],center:{lat:51.50853,lng:-.12574}};var y=P;class I extends s.a.Component{constructor(e){super(e),this.transformUserDetails=e=>{var t,a;const{name:n,location:s,picture:r,email:i}=e||{},l=parseFloat(null===s||void 0===s||null===(t=s.coordinates)||void 0===t?void 0:t.latitude,10),o=parseFloat(null===s||void 0===s||null===(a=s.coordinates)||void 0===a?void 0:a.longitude,10);return{id:i,name:null===n||void 0===n?void 0:n.first,lat:l,lng:o,coordinates:{lat:l,lng:o},largeImage:r.large,mediumImage:r.medium,thumbnailImage:r.thumbnail,zoom:4}},this.fetchUser=()=>{const{userCountsToFetch:e}=this.state;return fetch("https://randomuser.me/api/?inc=location,name,picture,email&results=".concat(e)).then((e=>e.json())).then((e=>Array.isArray(e.results)&&e.results.length?e.results:[])).catch((e=>[]))},this.handleClickMarker=e=>{const t=[];t.push(e),this.setState({activeMarker:e,tableData:t,showTable:!0})},this.state={activeMarker:null,markers:[],initialised:!1,showTable:!1,tableData:[],tableColumns:k,userCountsToFetch:3}}componentDidMount(){this.fetchUser().then((e=>{const t=e.map(this.transformUserDetails);this.setState({markers:t,initialised:!0})}))}render(){const{initialised:e,markers:t,tableData:a,tableColumns:n,showTable:s}=this.state;return e?Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(o,{className:"display-center",children:"React Data Plotting Application"}),Object(l.jsx)(y,{markers:t,onClickMarker:this.handleClickMarker}),s&&Object(l.jsx)(j,{className:"margin-top-10",data:a,columns:n})]}):Object(l.jsx)("div",{children:"Loading"})}}var T=I;const R=document.getElementById("root");i.a.render(Object(l.jsx)(n.StrictMode,{children:Object(l.jsx)(T,{})}),R)}},[[38,1,2]]]);
//# sourceMappingURL=main.0d3994c5.chunk.js.map